<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Stream Platform</title>
    <script src="https://cdn.peerjs.com/1.3.1/peerjs.min.js"></script>
    <style>
        body { display: flex; flex-direction: column; align-items: center; }
        video { width: 400px; height: 300px; margin: 10px; }
    </style>
</head>
<body>

<h1>PeerJS Live Streaming</h1>
<button id="startBtn">Start Streaming</button>
<video id="localVideo" autoplay playsinline></video>
<video id="remoteVideo" autoplay playsinline></video>

<script>
    const localVideo = document.getElementById('localVideo');
    const remoteVideo = document.getElementById('remoteVideo');
    let peer = new Peer(); // Create a PeerJS connection
    let currentCall;

    // Get media stream
    async function startStream() {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
        localVideo.srcObject = stream;

        peer.on('call', (call) => {
            call.answer(stream); // Answer the call with your own stream
            call.on('stream', (remoteStream) => {
                remoteVideo.srcObject = remoteStream; // Stream the video
            });
        });

        document.getElementById('startBtn').style.display = 'none'; // Hide the button after starting
    }

    peer.on('open', (id) => {
        console.log('My peer ID is: ' + id);
        const remotePeerId = prompt("Enter peer ID to connect:");
        if (remotePeerId) {
            const call = peer.call(remotePeerId, localVideo.srcObject);
            call.on('stream', (remoteStream) => {
                remoteVideo.srcObject = remoteStream;
            });
        }
    });

    document.getElementById('startBtn').onclick = startStream;
</script>

</body>
</html>

